{% from "macros.html" import square_highlight %}
{% extends "layout.html" %}
{% block title %}{{vehicle.fields.name}} - Belle Vitesse{% endblock %}
{% block content %}
<section id="hero-banner" class="section-site">
    <div class="vehicle-hero-banner bg-color-white-3">
        <img src="{{ vehicle.fields.banner[0].url }}" fetchpriority="high" />
        <div class="vehicle-hero-banner-wrapper animate__animated animation__banner-title">
            <div class="vehicle-hero-banner-titlewrapper">
                <h1 class="vehicle-hero-banner-titlewrapper-title font-54 color-grey-1">
                    {{ vehicle.fields.name }}
                </h1>
            </div>
            <div class="vehicle-hero-banner-textwrapper">
                <p class="vehicle-hero-banner-textwrapper-text color-grey-1 font-weight-400">
                    {{ vehicle.fields.powerquote| safe }}
                </p>
            </div>
        </div>
</section>
<section class="section-site">
    <div class="vehicle-description">
        <div class="vehicle-description-title">
            <h2 class="dot-before title-section">Description</h2>
        </div>
        <div class="vehicle-description-wrapper">
            <div class="vehicle-description-right">
                <div class="splide" aria-label="Splide Basic HTML Example">
                    <div class="splide__track">
                        <ul class="splide__list">
                            {% for image in vehicle.fields.gallery %}
                            <li class="splide__slide"><img src="{{ image.thumbnails.full.url }}" alt="Gallery image" />
                            </li>
                            {% endfor %}
                        </ul>
                    </div>
                </div>
            </div>
            <div class="vehicle-description-left">
                <p class="font-weight-400">{{ vehicle.fields.description }}</p>
            </div>
        </div>
    </div>
</section>
<section class="section-site">
    <div class="vehicle-key_features">
        <div class="vehicle-key_features-title">
            <h2 class="dot-before title-section">Key Features</h2>

        </div>
        <div>
            <div class="vehicle-squared-highlight">
                <div class="vehicle-squared-highlight-wrapper">
                    {{ square_highlight(vehicle.fields.max_speed, "km/h", "Max speed") }}
                    {{ square_highlight(vehicle.fields.passengers, "", "Capacity") }}
                </div>
            </div>
        </div>
</section>
{% if configs_grouped %}
<section class="section-site">
    <div class="vehicle-configurator">
        <h2 class="dot-before title-section">Configurations</h2>
        <div class="vehicle-configurator-carousel-wrapper">
            <div class="vehicle-configurator-carousel-wrapper-config">
                {% set ns = namespace(first=true, image='', label='') %}
                {% for type_name, items in configs_grouped.items() %}
                <div class="vehicle-configurator-carousel-wrapper-config-group">
                    <h3 class="title-section">{{ type_name }}</h3>
                    <nav class="vehicle-configurator-carousel-wrapper-config-list">
                        {% for item in items %}
                        <button
                            class="vehicle-configurator-carousel-wrapper-config-item config-btn {% if ns.first %}active{% else %}inactive{% endif %}"
                            data-image="{{ item.fields.image[0].thumbnails.large.url }}"
                            data-label="{{ item.fields.name }}">
                            {{ item.fields.name }}
                        </button>
                        {% if ns.first %}
                        {% set ns.image = item.fields.image[0].thumbnails.large.url %}
                        {% set ns.label = item.fields.name %}
                        {% set ns.first = false %}
                        {% endif %}
                        {% endfor %}
                    </nav>
                </div>
                {% endfor %}
            </div>
            <div class="vehicle-configurator-carousel-wrapper-img-container">
                <img id="configurator-image" src="{{ ns.image }}" alt="{{ ns.label }}">
            </div>
        </div>
    </div>
</section>
{% endif %}
<section class="section-site">
    <div class="vehicle-specs">
        <h2 class="vehicle-specs-title dot-before title-section">Technical specifications</h2>
        <div class="vehicle-specs-details">
            <div>
                {% for label, value in specs_left.items() %}
                <div class="vehicle-specs-details-detail-wrapper">
                    <p>{{ label }} :</p>
                    <div class="vehicle-specs-details-detail-wrapper-value">
                        <p>{{ value }}</p>
                    </div>
                </div>
                {% endfor %}
            </div>

            <div>
                {% for label, value in specs_right.items() %}
                <div class="vehicle-specs-details-detail-wrapper">
                    <p>{{ label }} :</p>
                    <div class="vehicle-specs-details-detail-wrapper-value">
                        <p>{{ value }}</p>
                    </div>
                </div>
                {% endfor %}
            </div>

        </div>
        {% if vehicle.fields.blueprint_side %}
        <div class="vehicle-specs-diagram-wrapper">

            <div class="vehicle-specs-diagram-wrapper-sideview"><img
                    src="{{ vehicle.fields.blueprint_side[0].thumbnails.full.url }}" /></div>
            <div class="vehicle-specs-diagram-wrapper-topview"><img
                    src="{{ vehicle.fields.blueprint_top[0].thumbnails.full.url }}" /></div>
        </div>
        {% endif%}
    </div>
</section>

{% endblock %}